/* ZD */
YUI.add("mytabview-lazyload",function(a){function b(){b.superclass.constructor.apply(this,arguments)}b.NS="mtvlazyload",b.NAME="pluginMyTabViewLazyload",b.ATTRS={lazySelector:{value:".yui3-mytabview-lazyload"},removeAfterLoaded:{value:!1}},a.extend(b,a.Plugin.Base,{initializer:function(){this._host=this.get("host"),this._srcNode=this._host.get("srcNode"),this._lazySelector=this.get("lazySelector"),this._host.publish("lazyload"),this.beforeHostMethod("_switchSelection",this._beforeSwitchSelection)},destructor:function(){},_beforeSwitchSelection:function(a){var b=a.newPanel,c=this;if(!b.hasClass("yui3-mytabview-panel-loaded")){var d=b.all(this._lazySelector);d.each(function(a){c._loadLazyContent(a)}),b.addClass("yui3-mytabview-panel-loaded")}this._host.fire("lazyload",a)},_loadLazyContent:function(b){var c="TEXTAREA"==b.get("tagName").toUpperCase()?b.get("value"):b.get("innerHTML"),d=c.replace(/&lt;/gi,"<").replace(/&gt;/gi,">"),e=new RegExp(/<script([^>]*)>([^<]*(?:(?!<\/script>)<[^<]*)*)<\/script>/gi),f=a.Node.create("<div>"+(d+"").replace(e,"")+"</div>"),g=b.ancestor(".yui3-mytabview-loading");b.insert(f.get("children").toFrag(),"before"),b.setStyle("display","none"),g&&g.removeClass("yui3-mytabview-loading"),this.get("removeAfterLoaded")&&b.remove(!0);var h,i,j,k,l,m,n=a.Node.getDOMNode(a.one("head")),o=/\ssrc=(['"])(.*?)\1/i,p=/\scharset=(['"])(.*?)\1/i;for(e.lastIndex=0;h=e.exec(d);)i=h[1],j=i?i.match(o):!1,j&&j[2]?(l=document.createElement("script"),l.src=j[2],(k=i.match(p))&&k[2]&&(l.charset=k[2]),l.async=!0,n.appendChild(l)):(m=h[2])&&m.length>0&&this._globalExecScript(m);return!0},_globalExecScript:function(a){if(a&&/\S/.test(a)){var b=document.getElementsByTagName("head")[0]||docElem,c=document.createElement("script");c.text=a,b.insertBefore(c,b.firstChild),b.removeChild(c)}}}),a.namespace("Plugin").MyTabViewLazyload=b},"1.0.0",{requires:["plugin","mytabview"]});