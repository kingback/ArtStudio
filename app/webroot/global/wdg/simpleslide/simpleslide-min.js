/* ZD */
YUI.add("simpleslide",function(a){a.SimpleSlide=a.Base.create("simpleslide",a.Base,[],{initializer:function(){this.publish("slide",{defaultFn:this._defSlideFn})},destructor:function(){},render:function(){this.renderUI(),this.bindUI(),this.syncUI()},renderUI:function(){this.tabs=this.get("tabs"),this.panels=this.get("panels"),this.prevBtn=this.get("prevBtn"),this.nextBtn=this.get("nextBtn"),this.delay=this.get("delay"),this.tabSelectedClass=this.get("tabSelectedClass"),this.panelSelectedClass=this.get("panelSelectedClass"),this.total=this.panels.size()},bindUI:function(){var a=this.get("event");this.after("indexChange",this._afterIndexChange),this.after({tabsChange:this._afterAttrChange,panelsChange:this._afterAttrChange,delayChange:this._afterAttrChange,prevBtnChange:this._afterAttrChange,nextBtnChange:this._afterAttrChange}),this.tabs&&this.tabs.size()&&("click"===a?this.tabs.on("click",this._onTabClick,this):"hover"===a&&(this.tabs.on("mouseenter",this._onTabMouseEnter,this),this.tabs.on("mouseleave",this._onTabMouseLeave,this))),this.prevBtn&&this.prevBtn.on("click",this.prev,this),this.nextBtn&&this.nextBtn.on("click",this.next,this)},syncUI:function(){this.go(this.get("selected"),!1)},go:function(a,b){this.set("index",a,{anim:b===!1?!1:!0})},prev:function(a){var b=this.get("index");a&&a.preventDefault(),b>0&&this.go(b-1)},next:function(a){var b=this.get("index");a&&a.preventDefault(),b<this.total-1&&this.go(b+1)},_goToTab:function(a){this.go(this.tabs.indexOf(a))},_onTabClick:function(a){a.preventDefault(),this._goToTab(a.currentTarget)},_onTabMouseEnter:function(a){var b=this;clearTimeout(this.delayTimer),this.delayTimer=setTimeout(function(){b._goToTab(a.currentTarget)},this.delay)},_onTabMouseLeave:function(){clearTimeout(this.delayTimer)},_defSlideFn:function(a){a.prevTab&&a.prevTab.removeClass(this.tabSelectedClass),a.prevPanel&&a.prevPanel.removeClass(this.panelSelectedClass),a.tab&&a.tab.addClass(this.tabSelectedClass),a.panel&&a.panel.addClass(this.panelSelectedClass)},_afterAttrChange:function(a){this[attrName]=a.newVal},_afterIndexChange:function(a){this.fire("slide",{prevIndex:a.prevVal,index:a.newVal,prevTab:this.tabs&&this.tabs.item(a.prevVal),prevPanel:this.panels.item(a.prevVal),tab:this.tabs&&this.tabs.item(a.newVal),panel:this.panels.item(a.newVal),anim:a.anim})}},{ATTRS:{index:{value:-1},selected:{value:0},tabs:{setter:a.all},panels:{setter:a.all},prevBtn:{setter:a.one},nextBtn:{setter:a.one},event:{value:"click"},delay:{value:200},tabSelectedClass:{value:"tab-selected"},panelSelectedClass:{value:"panel-selected"}}}),a.SimpleSlide.Slide=a.Base.create("simpleslide-slide",a.SimpleSlide,[],{initializer:function(){a.after(this._renderSlideCon,this,"renderUI",this),this.after("slide",this._runSlideAnim),this.before("indexChange",this._checkAnimRunning),this.running=!1},_renderSlideCon:function(){var b=a.Node.create('<div class="yui3-simpleslide-slidecon"></div>'),c=this.panels.item(0).ancestor(),d=this.get("width"),e=this.get("height"),f=this.total,g="x"===this.get("dir");c.setStyles({width:d+"px",height:e+"px",overflow:"hidden",position:"relative"}),b.setStyles({width:(g?d*f:d)+"px",height:(g?e:e*f)+"px",overflow:"hidden",position:"absolute",top:"0",left:"0"}),this.panels.setStyles({width:d+"px",height:e+"px","float":g?"left":"none"}),this.panels.item(0).insert(b,"before"),b.appendChild(this.panels),this.con=b},_checkAnimRunning:function(a){this.running&&a.preventDefault()},_runSlideAnim:function(b){var c=this,d="x"===this.get("dir"),e=this.get("width"),f=this.get("height"),g={};g[d?"left":"top"]=-(d?e:f)*b.index+"px",b.anim?(this.running=!0,this.con.transition(a.merge(this.get("transCfg"),g),function(){c.running=!1})):this.con.setStyles(g)}},{ATTRS:{dir:{value:"x"},transCfg:{value:{duration:.25}},width:{value:200},height:{value:100}}})},"0.0.1",{requires:["node","event","base","transition"]});