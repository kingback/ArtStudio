/* ZD */
YUI.add("slide",function(a){function b(){this.init.apply(this,arguments)}a.mix(b,{init:function(a,b){var c=this;if(c.id=a,c.buildParam(b),c.buildEvent(),c.construct(),c.bindEvent(),c.ready({index:0,navnode:c.tabs.item(0),pannelnode:c.pannels.item(0)}),c.reverse){var d;d=c.previous,c.previous=c.next,c.next=d}return c.carousel&&c.fix_for_transition_when_carousel(),c.fixSlideSize(),this},renderLazyData:function(b){if(b.setStyle("display","none"),"1"!=b.getAttribute("lazy-data")){b.setAttribute("lazy-data","1");var c=(a.stamp(d),b.get("innerHTML").replace(/&lt;/gi,"<").replace(/&gt;/gi,">")),d=a.Node.create("<div>"+c+"</div>");b.insert(d,"before");var e,f,g,h,i,j,k=function(a){if(a&&/\S/.test(a)){var b=document.getElementsByTagName("head")[0]||docElem,c=document.createElement("script");c.text=a,b.insertBefore(c,b.firstChild),b.removeChild(c)}},l=("K_"+(new Date).getTime().toString(),new RegExp(/<script([^>]*)>([^<]*(?:(?!<\/script>)<[^<]*)*)<\/script>/gi)),m=a.Node.getDOMNode(a.one("head")),n=/\ssrc=(['"])(.*?)\1/i,o=/\scharset=(['"])(.*?)\1/i;for(l.lastIndex=0;e=l.exec(c);)f=e[1],g=f?f.match(n):!1,g&&g[2]?(i=document.createElement("script"),i.src=g[2],(h=f.match(o))&&h[2]&&(i.charset=h[2]),i.async=!0,m.appendChild(i)):(j=e[2])&&j.length>0&&k(j)}},buildEvent:function(){this.publish("switch"),this.publish("after_switch"),this.publish("before_switch")},construct:function(){var b=this,c=b.con=a.one("#"+b.id);b.tabs=c.all("."+b.navClass+" li");var d=c.all("."+b.contentClass+" div."+b.pannelClass);if(b.length=d.size(),b.total=b.length,0==b.tabs.size()){for(var e=c.all("."+b.navClass),f="",g=0;g<b.length;g++){var h="";0==g&&(h=b.selectedClass),f+='<li class="'+h+'"><a href="javascript:void(0);">'+(g+1)+"</a></li>"}e.set("innerHTML",f)}if(b.tabs=c.all("."+b.navClass+" li"),b.animcon=c.one("."+b.contentClass),b.animwrap=null,"none"==b.effect)b.pannels=c.all("."+b.contentClass+" div."+b.pannelClass),b.pannels.setStyles({display:"none"}),b.pannels.item(b.defaultTab).setStyles({display:"block"});else if("v-slide"==b.effect){b.animwrap=a.Node.create('<div style="position:absolute;"></div>'),b.animwrap.set("innerHTML",b.animcon.get("innerHTML")),b.animcon.set("innerHTML",""),b.animcon.appendChild(b.animwrap),b.pannels=c.all("."+b.contentClass+" div."+b.pannelClass);var i=b.animcon.get("region");b.pannels.setStyles({"float":"none",overflow:"hidden"}),b.animwrap.setStyles({height:b.length*i.height+"px",overflow:"hidden",top:-1*b.defaultTab*i.height+"px"})}else if("h-slide"==b.effect){b.animwrap=a.Node.create('<div style="position:absolute;"></div>'),b.animwrap.set("innerHTML",b.animcon.get("innerHTML")),b.animcon.set("innerHTML",""),b.animcon.appendChild(b.animwrap),b.pannels=c.all("."+b.contentClass+" div."+b.pannelClass);var i=b.animcon.get("region");b.pannels.setStyles({"float":"left",overflow:"hidden"}),b.animwrap.setStyles({width:b.length*i.width+"px",overflow:"hidden",left:-1*b.defaultTab*i.width+"px"})}else"fade"==b.effect&&(b.pannels=c.all("."+b.contentClass+" div."+b.pannelClass),b.pannels.setStyles({position:"absolute",zIndex:0}),b.pannels.each(function(a,c){c==b.defaultTab?a.setStyles({opacity:1,display:"block"}):a.setStyles({opacity:0,diaplay:"none"})}));return b.fixSlideSize(b.current_tab),b.hightlightNav(b.getWrappedIndex(b.current_tab)),1==b.autoSlide&&b.play(),this},renderWidth:function(){var a=this,b=a.animcon.get("region").width;return a.pannels.setStyles({width:b+"px"}),this},renderHeight:function(){var a=this,b=a.animcon.get("region").height;return a.pannels.setStyles({height:b+"px"}),this},relocateCurrentTab:function(){var a=this,b=a.current_tab;return"h-slide"==a.effect?(a.transitions?a.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+-1*b*a.animcon.get("region").width+"px,0,0)"}):a.animwrap.setStyles({left:-1*b*a.animcon.get("region").width}),this):void 0},fixSlideSize:function(a){var b=this;return b.adaptive_fixed_width&&b.renderWidth(),b.adaptive_fixed_height&&b.renderHeight(),b.adaptive_fixed_size&&b.renderHeight().renderWidth(),b.resetSlideSize(a),this},resetSlideSize:function(a){var b=this;if(("undefined"==typeof a||null==a)&&(a=b.current_tab),"h-slide"==b.effect){var c=b.adaptive_width?b.adaptive_width():b.animcon.get("region").width;b.pannels.setStyles({width:c+"px",display:"block"});var d=b.pannels.item(a).get("region").height;return b.animcon.setStyles({width:c+"px",height:d+"px",overflow:"hidden"}),this}},getWrappedIndex:function(a){var b=this,c=0;return c=b.carousel?0==a?b.length-3:a==b.length-1?0:a-1:a},bindEvent:function(){var b=this;return("click"==b.eventype||"mouseover"==b.eventype)&&b.con.delegate(b.eventype,function(a){a.halt();var c=Number(b.tabs.indexOf(a.currentTarget));b.carousel&&(c=(c+1)%b.length),b.goto(c)},"."+b.navClass+" li"),b.hoverStop&&(b.con.delegate("mouseover",function(){b.autoSlide&&b.stop()},"."+b.contentClass+" div."+b.pannelClass),b.con.delegate("mouseout",function(){b.autoSlide&&b.play()},"."+b.contentClass+" div."+b.pannelClass)),a.on("resize",function(){b.fixSlideSize(b.current_tab),b.relocateCurrentTab()},window),"ontouchstart"in document.documentElement&&(b.con.delegate("touchstart",function(a){b.stop(),b.touching=!0,b.is_last()&&b.carousel&&b.fix_next_carousel(),b.is_first()&&b.carousel&&b.fix_pre_carousel(),b.startX=a._event.changedTouches[0].clientX,b.startY=a._event.changedTouches[0].clientY,b.animwrap.setStyles({"-webkit-transition-duration":"0s"}),b.startT=Number(new Date)},".tab-content"),b.con.delegate("touchend",function(a){b.touching=!1;var c=a._event.changedTouches[0].clientX,d=Number(b.animcon.get("region").width);b.deltaX=Math.abs(c-b.startX);var e=Math.abs(c)<Math.abs(b.startX),f=!e,g=b.carousel?!1:b.is_last()&&e||b.is_first()&&f,h=function(){b.animwrap.setStyles({"-webkit-transition-duration":Number(b.speed)/2+"s","-webkit-transform":"translate3d("+-1*b.current_tab*b.animcon.get("region").width+"px,0,0)"})},i=function(){e?b.next():b.previous()};return b.isScrolling?(h(),void 0):b.touchmove&&b.deltaX<20?(h(),void 0):(!g&&(b.touchmove&&b.deltaX>d/3||!b.touchmove&&b.carousel||!b.carousel&&b.touchmove&&"h-slide"==b.effect||!b.touchmove&&!b.carousel||Number(new Date)-b.startT<550)?i():h(),b.autoSlide&&b.play(),void 0)},".tab-content"),b.touchmove&&b.con.delegate("touchmove",function(a){if(!(a._event.touches.length>1)){b.deltaX=a._event.touches[0].pageX-b.startX;var c=b.is_last()&&b.deltaX<0||b.is_first()&&b.deltaX>0;if(!b.carousel&&"h-slide"==b.effect&&c&&(b.deltaX=b.deltaX/2),b.isScrolling=Math.abs(b.deltaX)<Math.abs(a._event.touches[0].pageY-b.startY)?!0:!1,!b.isScrolling){a.halt(),b.stop();var d=Number(b.animcon.get("region").width),e=b.deltaX-b.current_tab*d;b.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+e+"px,0,0)"})}}},".tab-content")),this},quadraturemotion:function(){},buildParam:function(a){var b=this,a="undefined"==typeof a||null==a?{}:a;return b.autoSlide="undefined"==typeof a.autoSlide||null==a.autoSlide?!1:a.autoSlide,b.speed="undefined"==typeof a.speed||null==a.speed?.5:a.speed,b.timeout="undefined"==typeof a.timeout||null==a.timeout?1e3:a.timeout,b.effect="undefined"==typeof a.effect||null==a.effect?"none":a.effect,b.eventype="undefined"==typeof a.eventype||null==a.eventype?"click":a.eventype,b.easing="undefined"==typeof a.easing||null==a.easing?"easeBoth":a.easing,b.hoverStop="undefined"==typeof a.hoverStop||null==a.hoverStop?!0:a.hoverStop,b.selectedClass="undefined"==typeof a.selectedClass||null==a.selectedClass?"selected":a.selectedClass,b.conClass="undefined"==typeof a.conClass||null==a.conClass?"t-slide":a.conClass,b.navClass="undefined"==typeof a.navClass||null==a.navClass?"tab-nav":a.navClass,b.contentClass="undefined"==typeof a.contentClass||null==a.contentClass?"tab-content":a.contentClass,b.pannelClass="undefined"==typeof a.pannelClass||null==a.pannelClass?"tab-pannel":a.pannelClass,b.before_switch="undefined"==typeof a.before_switch||null==a.before_switch?new Function:a.before_switch,b.ready="undefined"==typeof a.ready||null==a.ready?new Function:a.ready,b.carousel="undefined"==typeof a.carousel||null==a.carousel?!1:a.carousel,b.reverse="undefined"==typeof a.reverse||null==a.reverse?!1:a.reverse,b.touchmove="undefined"==typeof a.touchmove||null==a.touchmove?!1:a.touchmove,b.adaptive_fixed_width="undefined"==typeof a.adaptive_fixed_width||null==a.adaptive_fixed_width?!1:a.adaptive_fixed_width,b.adaptive_fixed_height="undefined"==typeof a.adaptive_fixed_height||null==a.adaptive_fixed_height?!1:a.adaptive_fixed_height,b.adaptive_fixed_size="undefined"==typeof a.adaptive_fixed_size||null==a.adaptive_fixed_size?!1:a.adaptive_fixed_size,b.adaptive_width="undefined"==typeof a.adaptive_width||null==a.adaptive_width?!1:a.adaptive_width,b.id=b.id,b.tabs=[],b.animcon=null,b.pannels=[],b.timer=null,b.touching=!1,b.defaultTab="undefined"==typeof a.defaultTab||null==a.defaultTab?0:Number(a.defaultTab)-1,"h-slide"!=b.effect&&(b.carousel=!1),b.carousel&&(b.defaultTab=1),b.current_tab=b.defaultTab,b.transitions="webkitTransition"in document.body.style,this},fix_for_transition_when_carousel:function(){var b=this,c=b.con=a.one("#"+b.id);b.animcon=b.con.one("."+b.contentClass),b.animwrap=b.animcon.one("div"),b.pannels=c.all("."+b.contentClass+" div."+b.pannelClass);var d=Number(b.animcon.get("region").width);if(Number(b.animcon.get("region").height),"h-slide"==b.effect){b.animwrap.setStyle("width",b.pannels.size()*d+2*d);var e=b.pannels.item(0).cloneNode(!0),f=b.pannels.item(b.pannels.size()-1).cloneNode(!0);b.animwrap.append(e),b.animwrap.prepend(f),b.transitions?b.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+-1*d+"px,0,0)",left:"0"}):b.animwrap.setStyle("left",-1*d)}b.pannels=c.all("."+b.contentClass+" div."+b.pannelClass),b.length+=2},previous:function(){var a=this;try{if(a.anim.get("running")&&a.carousel)return this}catch(b){}var c=a.current_tab+a.length-1;return c>=a.length&&(c%=a.length),a.carousel&&a.is_first()?(a.fix_pre_carousel(),arguments.callee.call(a),this):(a.goto(c),this)},is_last:function(){var a=this;return a.current_tab==a.length-1?!0:!1},is_first:function(){var a=this;return 0==a.current_tab?!0:!1},next:function(){var a=this;try{if(a.anim.get("running")&&a.carousel)return this}catch(b){}var c=a.current_tab+1;return c>=a.length&&(c%=a.length),a.carousel&&a.is_last()?(a.fix_next_carousel(),arguments.callee.call(a),this):(a.goto(c),this)},fix_next_carousel:function(){var b=this;b.current_tab=1;var c=b.con=a.one("#"+b.id);"none"!=b.effect&&(b.pannels=c.all("."+b.contentClass+" div."+b.pannelClass));var d="-"+Number(b.animcon.get("region").width).toString()+"px";"h-slide"==b.effect?b.transitions?b.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+d+",0,0)"}):b.animwrap.setStyle("left",d):"v-slide"==b.effect},fix_pre_carousel:function(){var b=this;b.current_tab=b.length-2;var c=b.con=a.one("#"+b.id);"none"!=b.effect&&(b.pannels=c.all("."+b.contentClass+" div."+b.pannelClass));var d="-"+(Number(b.animcon.get("region").width)*(b.length-2)).toString()+"px";"h-slide"==b.effect?b.transitions?b.animwrap.setStyles({"-webkit-transition-duration":"0s","-webkit-transform":"translate3d("+d+",0,0)"}):b.animwrap.setStyle("left",d):"v-slide"==b.effect},hightlightNav:function(a){var b=this;return b.tabs.removeClass(b.selectedClass),b.tabs.item(a).addClass(b.selectedClass),this},switch_to:function(b){var c=this,d=c.getWrappedIndex(b),e=c.getWrappedIndex(c.current_tab);if(c.hightlightNav(d),c.fixSlideSize(b),c.autoSlide&&c.stop().play(),b>=c.length&&(b%=c.length),b==c.current_tab)return this;if("none"==c.effect)c.pannels.setStyles({display:"none"}),c.pannels.item(b).setStyles({display:"block"});else if("v-slide"==c.effect){if(c.anim)try{c.anim.stop(),c.anim.destroy(),c.anim=null}catch(f){}c.transitions?c.animwrap.setStyles({"-webkit-transition-duration":c.speed+"s","-webkit-transform":"translate3d(0,"+-1*b*c.animcon.get("region").height+"px,0)"}):(c.anim=new a.Anim({node:c.animwrap,to:{top:-1*b*c.animcon.get("region").height},easing:c.easing,duration:c.speed}),c.anim.run())}else if("h-slide"==c.effect){if(c.anim)try{c.anim.stop(),c.anim.destroy(),c.anim=null}catch(f){}c.transitions?c.animwrap.setStyles({"-webkit-transition-duration":c.speed+"s","-webkit-transform":"translate3d("+-1*b*c.animcon.get("region").width+"px,0,0)"}):(c.anim=new a.Anim({node:c.animwrap,to:{left:-1*b*c.animcon.get("region").width},easing:c.easing,duration:c.speed}),c.anim.run())}else if("fade"==c.effect){var g=c.current_tab;if(c.anim)try{c.anim.stop(),c.anim.destroy(),c.anim=null}catch(f){}c.anim=new a.Anim({node:c.pannels.item(b),to:{opacity:1},easing:c.easing,duration:c.speed}),c.anim.on("start",function(){c.pannels.item(b).setStyles({display:"block"}),c.pannels.item(b).setStyle("opacity",0),c.pannels.item(g).setStyle("zIndex",1),c.pannels.item(b).setStyle("zIndex",2)}),c.anim.on("end",function(){c.pannels.item(g).setStyle("zIndex",0),c.pannels.item(b).setStyle("zIndex",1),c.pannels.item(g).setStyle("opacity",0),c.pannels.item(g).setStyles({display:"none"})}),c.anim.run()}c.current_tab=b,c.fire("switch",{index:d,newIndex:d,prevIndex:e,navnode:c.tabs.item(d),pannelnode:c.pannels.item(b)});var h=c.pannels.item(b).all(".lazyload");h&&h.each(function(a){c.renderLazyData(a)})},"goto":function(a){var b=this;0!=b.before_switch({index:a,navnode:b.tabs.item(a),pannelnode:b.pannels.item(a)})&&b.switch_to(a)},play:function(){var a=this;return null!=a.timer&&clearTimeout(a.timer),a.timer=setTimeout(function(){a.next().play()},Number(a.timeout)),this},stop:function(){var a=this;return clearTimeout(a.timer),a.timer=null,this}},0,null,4),a.augment(b,a.EventTarget,{edmitFacade:!0}),a.Slide=b},"1.0.0",{requires:["node","event-custom","anim"]});